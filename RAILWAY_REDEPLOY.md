# دليل إعادة النشر على Railway (حساب جديد)

بما أنك قررت العودة إلى Railway بحساب جديد، اتبع الخطوات التالية لضمان عملية نشر سلسة ونظيفة.

## 1. تنظيف المشروع
لقد قمت بحذف ملفات Render (`render.yaml` و `RENDER_DEPLOY_GUIDE.md`) لعدم الحاجة إليها وتجنب الارتباك.

## 2. إنشاء حساب جديد على Railway
1. اذهب إلى [Railway.app](https://railway.app/).
2. سجل دخول باستخدام حساب GitHub *جديد* أو ايميل مختلف، أو تأكد من أن حسابك الحالي يملك رصيداً مجانياً (Trial).
3. اضغط على **+ New Project** > **Deploy from GitHub repo**.
4. اختر مستودع المشروع `Smart-Campus-Assistant-v-1.1`.

## 3. إعداد المتغيرات (Environment Variables)
هذه الخطوة الأهم. Railway لن يقرأ ملف `.env` المحلي، يجب إدخال المتغيرات يدوياً في لوحة تحكم Railway.

1. بعد اختيار المشروع، اذهب إلى تبويب **Variables**.
2. اضغط على **Raw Editor** (أسهل للصق كل المتغيرات مرة واحدة).
3. انسخ محتوى ملف `.env` الخاص بك (تأكد من عدم نسخ تعليقات أو أسطر فارغة تسبب مشاكل) وألصقه هناك.
4. **هام جداً:** تأكد من تحديث المتغيرات التالية:
    - `DATABASE_URL`: إذا كنت تستخدم قاعدة بيانات Supabase، تأكد أنها تعمل. إذا كنت تريد إنشاء قاعدة بيانات جديدة على Railway، يمكنك إضافة خدمة PostgreSQL من داخل Railway وربطها (لكن Supabase أفضل للـ Performance في الخطة المجانية).
    - `PORT`: Railway يقوم بتعيينه تلقائياً، لكن يفضل حذفه من القائمة لترك Railway يديره، أو تعيينه وتأكد أن الكود يقرأه `process.env.PORT`.

## 4. أوامر التشغيل (Build & Start)
في تبويب **Settings** > **Build & Deploy**:
- **Build Command:** `npm install && npm run build:backend`
- **Start Command:** `npm start`
- **Watch Paths:** (اختياري) يمكنك تركها فارغة.

## 5. ربط الـ Frontend
بعد نجاح النشر (سيتحول اللون للأخضر Active):
1. اذهب إلى تبويب **Settings** > **Domains**.
2. انسخ الدومين الخاص بالسيرفر (مثلاً `smart-campus-production.up.railway.app`).
3. اذهب إلى مشروع **Vercel** (الواجهة الأمامية).
4. حدث متغير البيئة `VITE_API_URL` (أو ما شابه) بالرابط الجديد.
5. أعد نشر الـ Frontend.

## ملاحظة
تذكر أن الخطة المجانية التجريبية (Trial) في Railway محدودة بـ 5 دولارات أو عدد ساعات معين. راقب الاستهلاك في لوحة التحكم.
